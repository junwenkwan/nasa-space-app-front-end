{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jason/Desktop/nasa-space-app-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jason/Desktop/nasa-space-app-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/jason/Desktop/nasa-space-app-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jason/Desktop/nasa-space-app-front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{GoogleMap,useLoadScript,Marker,InfoWindow}from\"@react-google-maps/api\";import usePlacesAutocomplete,{getGeocode,getLatLng}from\"use-places-autocomplete\";import{Combobox,ComboboxInput,ComboboxPopover,ComboboxList,ComboboxOption}from\"@reach/combobox\";import{formatRelative}from\"date-fns\";import\"@reach/combobox/styles.css\";import mapStyles from\"./mapStyles\";var libraries=[\"places\"];var mapContainerStyle={height:\"100vh\",width:\"100vw\"};var options={styles:mapStyles,disableDefaultUI:true,zoomControl:true};var center={lat:-37.560902,lng:143.854965};export default function App(){var _useLoadScript=useLoadScript({googleMapsApiKey:process.env.REACT_APP_GOOGLE_MAPS_API_KEY,libraries:libraries}),isLoaded=_useLoadScript.isLoaded,loadError=_useLoadScript.loadError;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),markers=_React$useState2[0],setMarkers=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),selected=_React$useState4[0],setSelected=_React$useState4[1];var onMapClick=React.useCallback(function(e){setMarkers(function(current){return[].concat(_toConsumableArray(current),[{lat:e.latLng.lat(),lng:e.latLng.lng(),time:new Date()}]);});},[]);var mapRef=React.useRef();var onMapLoad=React.useCallback(function(map){mapRef.current=map;},[]);var panTo=React.useCallback(function(_ref){var lat=_ref.lat,lng=_ref.lng;mapRef.current.panTo({lat:lat,lng:lng});mapRef.current.setZoom(14);},[]);if(loadError)return\"Error\";if(!isLoaded)return\"Loading...\";return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Search,{panTo:panTo}),/*#__PURE__*/React.createElement(GoogleMap,{id:\"map\",mapContainerStyle:mapContainerStyle,zoom:8,center:center,options:options,onClick:onMapClick,onLoad:onMapLoad},markers.map(function(marker){return/*#__PURE__*/React.createElement(Marker,{key:\"\".concat(marker.lat,\"-\").concat(marker.lng),position:{lat:marker.lat,lng:marker.lng},onClick:function onClick(){setSelected(marker);},icon:{url:\"/logo.svg\",origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(15,15),scaledSize:new window.google.maps.Size(30,30)}});}),selected?/*#__PURE__*/React.createElement(InfoWindow,{position:{lat:selected.lat,lng:selected.lng},onCloseClick:function onCloseClick(){setSelected(null);}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Fire spotted !\"),/*#__PURE__*/React.createElement(\"p\",null,\"Spotted \",formatRelative(selected.time,new Date())))):null));}function Search(_ref2){var panTo=_ref2.panTo;var _usePlacesAutocomplet=usePlacesAutocomplete({requestOptions:{location:{lat:function lat(){return-37.560902;},lng:function lng(){return 143.854965;}},radius:100*1000}}),ready=_usePlacesAutocomplet.ready,value=_usePlacesAutocomplet.value,_usePlacesAutocomplet2=_usePlacesAutocomplet.suggestions,status=_usePlacesAutocomplet2.status,data=_usePlacesAutocomplet2.data,setValue=_usePlacesAutocomplet.setValue,clearSuggestions=_usePlacesAutocomplet.clearSuggestions;var handleInput=function handleInput(e){setValue(e.target.value);};var handleSelect=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(address){var results,_yield$getLatLng,lat,lng;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setValue(address,false);clearSuggestions();_context.prev=2;_context.next=5;return getGeocode({address:address});case 5:results=_context.sent;_context.next=8;return getLatLng(results[0]);case 8:_yield$getLatLng=_context.sent;lat=_yield$getLatLng.lat;lng=_yield$getLatLng.lng;panTo({lat:lat,lng:lng});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.log(\"ðŸ˜± Error: \",_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function handleSelect(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"search\"},/*#__PURE__*/React.createElement(Combobox,{onSelect:handleSelect},/*#__PURE__*/React.createElement(ComboboxInput,{value:value,onChange:handleInput,disabled:!ready,placeholder:\"Search your location\"}),/*#__PURE__*/React.createElement(ComboboxPopover,null,/*#__PURE__*/React.createElement(ComboboxList,null,status===\"OK\"&&data.map(function(_ref4){var id=_ref4.id,description=_ref4.description;return/*#__PURE__*/React.createElement(ComboboxOption,{key:id,value:description});})))));}","map":{"version":3,"sources":["/Users/jason/Desktop/nasa-space-app-front-end/src/App.js"],"names":["React","GoogleMap","useLoadScript","Marker","InfoWindow","usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","formatRelative","mapStyles","libraries","mapContainerStyle","height","width","options","styles","disableDefaultUI","zoomControl","center","lat","lng","App","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","isLoaded","loadError","useState","markers","setMarkers","selected","setSelected","onMapClick","useCallback","e","current","latLng","time","Date","mapRef","useRef","onMapLoad","map","panTo","setZoom","marker","url","origin","window","google","maps","Point","anchor","scaledSize","Size","Search","requestOptions","location","radius","ready","value","suggestions","status","data","setValue","clearSuggestions","handleInput","target","handleSelect","address","results","console","log","id","description"],"mappings":"qpBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,SADF,CAEEC,aAFF,CAGEC,MAHF,CAIEC,UAJF,KAKO,wBALP,CAMA,MAAOC,CAAAA,qBAAP,EACEC,UADF,CAEEC,SAFF,KAGO,yBAHP,CAIA,OACEC,QADF,CAEEC,aAFF,CAGEC,eAHF,CAIEC,YAJF,CAKEC,cALF,KAMO,iBANP,CAOA,OAASC,cAAT,KAA+B,UAA/B,CAEA,MAAO,4BAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,GAAMC,CAAAA,SAAS,CAAG,CAAC,QAAD,CAAlB,CACA,GAAMC,CAAAA,iBAAiB,CAAG,CACxBC,MAAM,CAAE,OADgB,CAExBC,KAAK,CAAE,OAFiB,CAA1B,CAIA,GAAMC,CAAAA,OAAO,CAAG,CACdC,MAAM,CAAEN,SADM,CAEdO,gBAAgB,CAAE,IAFJ,CAGdC,WAAW,CAAE,IAHC,CAAhB,CAKA,GAAMC,CAAAA,MAAM,CAAG,CACbC,GAAG,CAAE,CAAC,SADO,CAEbC,GAAG,CAAE,UAFQ,CAAf,CAKA,cAAe,SAASC,CAAAA,GAAT,EAAe,oBACIxB,aAAa,CAAC,CAC5CyB,gBAAgB,CAAEC,OAAO,CAACC,GAAR,CAAYC,6BADc,CAE5Cf,SAAS,CAATA,SAF4C,CAAD,CADjB,CACpBgB,QADoB,gBACpBA,QADoB,CACVC,SADU,gBACVA,SADU,qBAKEhC,KAAK,CAACiC,QAAN,CAAe,EAAf,CALF,oDAKrBC,OALqB,qBAKZC,UALY,0CAMInC,KAAK,CAACiC,QAAN,CAAe,IAAf,CANJ,qDAMrBG,QANqB,qBAMXC,WANW,qBAQ5B,GAAMC,CAAAA,UAAU,CAAGtC,KAAK,CAACuC,WAAN,CAAkB,SAACC,CAAD,CAAO,CAC1CL,UAAU,CAAC,SAACM,OAAD,qCACNA,OADM,GAET,CACEjB,GAAG,CAAEgB,CAAC,CAACE,MAAF,CAASlB,GAAT,EADP,CAEEC,GAAG,CAAEe,CAAC,CAACE,MAAF,CAASjB,GAAT,EAFP,CAGEkB,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EAHR,CAFS,IAAD,CAAV,CAQD,CATkB,CAShB,EATgB,CAAnB,CAWA,GAAMC,CAAAA,MAAM,CAAG7C,KAAK,CAAC8C,MAAN,EAAf,CACA,GAAMC,CAAAA,SAAS,CAAG/C,KAAK,CAACuC,WAAN,CAAkB,SAACS,GAAD,CAAS,CAC3CH,MAAM,CAACJ,OAAP,CAAiBO,GAAjB,CACD,CAFiB,CAEf,EAFe,CAAlB,CAIA,GAAMC,CAAAA,KAAK,CAAGjD,KAAK,CAACuC,WAAN,CAAkB,cAAkB,IAAff,CAAAA,GAAe,MAAfA,GAAe,CAAVC,GAAU,MAAVA,GAAU,CAChDoB,MAAM,CAACJ,OAAP,CAAeQ,KAAf,CAAqB,CAAEzB,GAAG,CAAHA,GAAF,CAAOC,GAAG,CAAHA,GAAP,CAArB,EACAoB,MAAM,CAACJ,OAAP,CAAeS,OAAf,CAAuB,EAAvB,EACD,CAHa,CAGX,EAHW,CAAd,CAKA,GAAIlB,SAAJ,CAAe,MAAO,OAAP,CACf,GAAI,CAACD,QAAL,CAAe,MAAO,YAAP,CAEf,mBACE,4CACE,oBAAC,MAAD,EAAQ,KAAK,CAAEkB,KAAf,EADF,cAGE,oBAAC,SAAD,EACE,EAAE,CAAC,KADL,CAEE,iBAAiB,CAAEjC,iBAFrB,CAGE,IAAI,CAAE,CAHR,CAIE,MAAM,CAAEO,MAJV,CAKE,OAAO,CAAEJ,OALX,CAME,OAAO,CAAEmB,UANX,CAOE,MAAM,CAAES,SAPV,EASGb,OAAO,CAACc,GAAR,CAAY,SAACG,MAAD,qBACX,oBAAC,MAAD,EACE,GAAG,WAAKA,MAAM,CAAC3B,GAAZ,aAAmB2B,MAAM,CAAC1B,GAA1B,CADL,CAEE,QAAQ,CAAE,CAAED,GAAG,CAAE2B,MAAM,CAAC3B,GAAd,CAAmBC,GAAG,CAAE0B,MAAM,CAAC1B,GAA/B,CAFZ,CAGE,OAAO,CAAE,kBAAM,CACbY,WAAW,CAACc,MAAD,CAAX,CACD,CALH,CAME,IAAI,CAAE,CACJC,GAAG,YADC,CAEJC,MAAM,CAAE,GAAIC,CAAAA,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBC,KAAvB,CAA6B,CAA7B,CAAgC,CAAhC,CAFJ,CAGJC,MAAM,CAAE,GAAIJ,CAAAA,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBC,KAAvB,CAA6B,EAA7B,CAAiC,EAAjC,CAHJ,CAIJE,UAAU,CAAE,GAAIL,CAAAA,MAAM,CAACC,MAAP,CAAcC,IAAd,CAAmBI,IAAvB,CAA4B,EAA5B,CAAgC,EAAhC,CAJR,CANR,EADW,EAAZ,CATH,CAyBGxB,QAAQ,cACP,oBAAC,UAAD,EACE,QAAQ,CAAE,CAAEZ,GAAG,CAAEY,QAAQ,CAACZ,GAAhB,CAAqBC,GAAG,CAAEW,QAAQ,CAACX,GAAnC,CADZ,CAEE,YAAY,CAAE,uBAAM,CAClBY,WAAW,CAAC,IAAD,CAAX,CACD,CAJH,eAME,4CACE,+CADF,cAIE,wCAAYxB,cAAc,CAACuB,QAAQ,CAACO,IAAV,CAAgB,GAAIC,CAAAA,IAAJ,EAAhB,CAA1B,CAJF,CANF,CADO,CAcL,IAvCN,CAHF,CADF,CA+CD,CAED,QAASiB,CAAAA,MAAT,OAA2B,IAATZ,CAAAA,KAAS,OAATA,KAAS,2BAOrB5C,qBAAqB,CAAC,CACxByD,cAAc,CAAE,CACdC,QAAQ,CAAE,CAAEvC,GAAG,CAAE,qBAAM,CAAC,SAAP,EAAP,CAAyBC,GAAG,CAAE,qBAAM,WAAN,EAA9B,CADI,CAEduC,MAAM,CAAE,IAAM,IAFA,CADQ,CAAD,CAPA,CAEvBC,KAFuB,uBAEvBA,KAFuB,CAGvBC,KAHuB,uBAGvBA,KAHuB,8CAIvBC,WAJuB,CAIRC,MAJQ,wBAIRA,MAJQ,CAIAC,IAJA,wBAIAA,IAJA,CAKvBC,QALuB,uBAKvBA,QALuB,CAMvBC,gBANuB,uBAMvBA,gBANuB,CAczB,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAChC,CAAD,CAAO,CACzB8B,QAAQ,CAAC9B,CAAC,CAACiC,MAAF,CAASP,KAAV,CAAR,CACD,CAFD,CAIA,GAAMQ,CAAAA,YAAY,2FAAG,iBAAOC,OAAP,uJACnBL,QAAQ,CAACK,OAAD,CAAU,KAAV,CAAR,CACAJ,gBAAgB,GAFG,sCAKKjE,CAAAA,UAAU,CAAC,CAAEqE,OAAO,CAAPA,OAAF,CAAD,CALf,QAKXC,OALW,qCAMUrE,CAAAA,SAAS,CAACqE,OAAO,CAAC,CAAD,CAAR,CANnB,uCAMTpD,GANS,kBAMTA,GANS,CAMJC,GANI,kBAMJA,GANI,CAOjBwB,KAAK,CAAC,CAAEzB,GAAG,CAAHA,GAAF,CAAOC,GAAG,CAAHA,GAAP,CAAD,CAAL,CAPiB,iFASjBoD,OAAO,CAACC,GAAR,CAAY,YAAZ,cATiB,qEAAH,kBAAZJ,CAAAA,YAAY,6CAAlB,CAaA,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,QAAD,EAAU,QAAQ,CAAEA,YAApB,eACE,oBAAC,aAAD,EACE,KAAK,CAAER,KADT,CAEE,QAAQ,CAAEM,WAFZ,CAGE,QAAQ,CAAE,CAACP,KAHb,CAIE,WAAW,CAAC,sBAJd,EADF,cAOE,oBAAC,eAAD,mBACE,oBAAC,YAAD,MACGG,MAAM,GAAK,IAAX,EACCC,IAAI,CAACrB,GAAL,CAAS,mBAAG+B,CAAAA,EAAH,OAAGA,EAAH,CAAOC,WAAP,OAAOA,WAAP,oBACP,oBAAC,cAAD,EAAgB,GAAG,CAAED,EAArB,CAAyB,KAAK,CAAEC,WAAhC,EADO,EAAT,CAFJ,CADF,CAPF,CADF,CADF,CAoBD","sourcesContent":["import React from \"react\";\r\nimport {\r\n  GoogleMap,\r\n  useLoadScript,\r\n  Marker,\r\n  InfoWindow,\r\n} from \"@react-google-maps/api\";\r\nimport usePlacesAutocomplete, {\r\n  getGeocode,\r\n  getLatLng,\r\n} from \"use-places-autocomplete\";\r\nimport {\r\n  Combobox,\r\n  ComboboxInput,\r\n  ComboboxPopover,\r\n  ComboboxList,\r\n  ComboboxOption,\r\n} from \"@reach/combobox\";\r\nimport { formatRelative } from \"date-fns\";\r\n\r\nimport \"@reach/combobox/styles.css\";\r\nimport mapStyles from \"./mapStyles\";\r\n\r\nconst libraries = [\"places\"];\r\nconst mapContainerStyle = {\r\n  height: \"100vh\",\r\n  width: \"100vw\",\r\n};\r\nconst options = {\r\n  styles: mapStyles,\r\n  disableDefaultUI: true,\r\n  zoomControl: true,\r\n};\r\nconst center = {\r\n  lat: -37.560902,\r\n  lng: 143.854965,\r\n};\r\n\r\nexport default function App() {\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\r\n    libraries,\r\n  });\r\n  const [markers, setMarkers] = React.useState([]);\r\n  const [selected, setSelected] = React.useState(null);\r\n\r\n  const onMapClick = React.useCallback((e) => {\r\n    setMarkers((current) => [\r\n      ...current,\r\n      {\r\n        lat: e.latLng.lat(),\r\n        lng: e.latLng.lng(),\r\n        time: new Date(),\r\n      },\r\n    ]);\r\n  }, []);\r\n\r\n  const mapRef = React.useRef();\r\n  const onMapLoad = React.useCallback((map) => {\r\n    mapRef.current = map;\r\n  }, []);\r\n\r\n  const panTo = React.useCallback(({ lat, lng }) => {\r\n    mapRef.current.panTo({ lat, lng });\r\n    mapRef.current.setZoom(14);\r\n  }, []);\r\n\r\n  if (loadError) return \"Error\";\r\n  if (!isLoaded) return \"Loading...\";\r\n\r\n  return (\r\n    <div>\r\n      <Search panTo={panTo} />\r\n\r\n      <GoogleMap\r\n        id=\"map\"\r\n        mapContainerStyle={mapContainerStyle}\r\n        zoom={8}\r\n        center={center}\r\n        options={options}\r\n        onClick={onMapClick}\r\n        onLoad={onMapLoad}\r\n      >\r\n        {markers.map((marker) => (\r\n          <Marker\r\n            key={`${marker.lat}-${marker.lng}`}\r\n            position={{ lat: marker.lat, lng: marker.lng }}\r\n            onClick={() => {\r\n              setSelected(marker);\r\n            }}\r\n            icon={{\r\n              url: `/logo.svg`,\r\n              origin: new window.google.maps.Point(0, 0),\r\n              anchor: new window.google.maps.Point(15, 15),\r\n              scaledSize: new window.google.maps.Size(30, 30),\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {selected ? (\r\n          <InfoWindow\r\n            position={{ lat: selected.lat, lng: selected.lng }}\r\n            onCloseClick={() => {\r\n              setSelected(null);\r\n            }}\r\n          >\r\n            <div>\r\n              <h2>\r\n                Fire spotted !\r\n              </h2>\r\n              <p>Spotted {formatRelative(selected.time, new Date())}</p>\r\n            </div>\r\n          </InfoWindow>\r\n        ) : null}\r\n      </GoogleMap>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Search({ panTo }) {\r\n  const {\r\n    ready,\r\n    value,\r\n    suggestions: { status, data },\r\n    setValue,\r\n    clearSuggestions,\r\n  } = usePlacesAutocomplete({\r\n    requestOptions: {\r\n      location: { lat: () => -37.560902, lng: () => 143.854965 },\r\n      radius: 100 * 1000,\r\n    },\r\n  });\r\n\r\n  const handleInput = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const handleSelect = async (address) => {\r\n    setValue(address, false);\r\n    clearSuggestions();\r\n\r\n    try {\r\n      const results = await getGeocode({ address });\r\n      const { lat, lng } = await getLatLng(results[0]);\r\n      panTo({ lat, lng });\r\n    } catch (error) {\r\n      console.log(\"ðŸ˜± Error: \", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <Combobox onSelect={handleSelect}>\r\n        <ComboboxInput\r\n          value={value}\r\n          onChange={handleInput}\r\n          disabled={!ready}\r\n          placeholder=\"Search your location\"\r\n        />\r\n        <ComboboxPopover>\r\n          <ComboboxList>\r\n            {status === \"OK\" &&\r\n              data.map(({ id, description }) => (\r\n                <ComboboxOption key={id} value={description} />\r\n              ))}\r\n          </ComboboxList>\r\n        </ComboboxPopover>\r\n      </Combobox>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}